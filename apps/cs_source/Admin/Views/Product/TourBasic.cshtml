@using System.Collections.Generic
@using System.Linq
@using System.Security.Claims
@using Vinaday.Data.Models
@using Vinaday.Data.Models.Extention
@model Tour
@{
    ViewBag.Title = "Tour - Management";
    var role = ((ClaimsIdentity)User.Identity).Claims
       .Where(c => c.Type == ClaimTypes.Role)
       .Select(c => c.Value).FirstOrDefault();
    Layout = role.Contains("Master Admin") ? "~/Views/Shared/_MasterLayout.cshtml" : (role.Contains("Master SEO") ? "~/Views/Shared/_MasterSEO.cshtml" : "~/Views/Shared/_ContentLayout.cshtml");
    List<Country> countries = ViewBag.Countries;

    List<ItemModel> items = ViewBag.TravelStyles;
    List<ItemModel> cities = ViewBag.Cities;
}

@if (Model != null)
{
    <input type="hidden" id="tourId" value="@Model.Id" />
    <div class="page-title">
        <h3>Basic information</h3>
        <div class="page-breadcrumb">
            <ol class="breadcrumb">
                <li class="active">@Model.Name</li>
            </ol>
        </div>
    </div>
    <div id="main-wrapper">
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-white">
                    <div class="panel-heading clearfix">
                        <div role="group" class="pull-left">
                            <div class="form-group">
                                <select id="language" class="form-control">
                                    <option value="2">English</option>
                                    <option value="1">Vietnam</option>
                                    <option value="3">German</option>
                                    <option value="4">French</option>
                                    <option value="5">Danish</option>
                                </select>
                            </div>
                        </div>
                        <div role="group" class="pull-right">
                            <a disabled href="@Url.Content(string.Format("~/Product/TourBasic/{0}", Model.Id))" class="btn btn-success m-b-sm">Basic Info</a>
                            <a href="@Url.Content(string.Format("~/Product/TourDetail/{0}", Model.Id))" class="btn btn-success m-b-sm">Detail</a>
                            <a href="@Url.Content(string.Format("~/Product/TourPhoto/{0}", Model.Id))" class="btn btn-success m-b-sm">Photos galery</a>
                            <a href="@Url.Content(string.Format("~/Product/TourItinerary/{0}", Model.Id))" class="btn btn-success m-b-sm">Itinerary</a>
                            <a href="@Url.Content(string.Format("~/Product/TourPrice/{0}", Model.Id))" class="btn btn-success m-b-sm">Rates Control</a>
                            <a href="@Url.Content(string.Format("~/Product/TourSurcharge/{0}", Model.Id))" class="btn btn-success m-b-sm">Surcharges</a>
                            <a href="@Url.Content(string.Format("~/Product/TourPromotion/{0}", Model.Id))" class="btn btn-success m-b-sm">Promotions</a>
                            <a href="@Url.Content(string.Format("~/Product/TourPriceOption/{0}", Model.Id))" class="btn btn-success m-b-sm">Price Option</a>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                <div id="tour-basic">
                    <input type="hidden" id="child-tour-id" value="@Model.Id" />
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-lg-12 col-md-12">
                                <div class="panel panel-white">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <div class="panel-body">
                                                <form class="form-horizontal">
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="title">Title</label>
                                                        <div class="col-sm-10">
                                                            <input id="title" value="@Model.Name" type="text" class="form-control" placeholder="Title">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="title">Tour title on link</label>
                                                        <div class="col-sm-10">
                                                            <input id="tour_title" value="@Model.TourTitle" type="text" class="form-control" placeholder="Tour Title Link">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="title">Youtube Link</label>
                                                        <div class="col-sm-10">
                                                            <input id="tour_VideoLink" value="@Model.VideoLink" type="text" class="form-control" placeholder="https://www.youtube.com/watch?v=Xuu9SPnOzGE">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="title">Type</label>
                                                        <div class="col-sm-10">
                                                            <select id="type" class="form-control" disabled>
                                                                <option value="1" @(Model.Type == 1 ? "selected" : "")>Tour</option>
                                                                <option value="2" @(Model.Type == 2 ? "selected" : "")>Day trip</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="country">Country</label>
                                                        <div class="col-sm-10">
                                                            <select id="country" class="form-control">
                                                                @if (countries.Count > 0)
                                                                {
                                                                    foreach (var country in countries.Where(country => country != null))
                                                                    {
                                                                        <option value="@country.CountryId" @(country.CountryId == Model.CountryId ? "selected" : "")>@country.Name</option>
                                                                    }
                                                                }
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="city">City</label>
                                                        <div class="col-sm-10">
                                                            <select id="city" multiple="multiple" class="form-control">
                                                                @if (cities.Count > 0)
                                                                {
                                                                    foreach (var city in cities.Where(city => city != null))
                                                                    {
                                                                        <option value="@city.Id" @(city.Checked ? "selected" : "")>@city.Name</option>
                                                                    }
                                                                }
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="description">Description</label>
                                                        <div class="col-sm-10">
                                                            <div id="description">@Html.Raw(Model.Description)</div>
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="location">Location</label>
                                                        <div class="col-sm-10">
                                                            <input id="location" value="@Model.Location" type="text" class="form-control" placeholder="Location">
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="travel-style">Travel style</label>
                                                        <div class="col-sm-10">
                                                            <div id="travel-style">
                                                                @if (items != null)
                                                                {
                                                                    foreach (var item in items)
                                                                    {

                                                                        <div class="checkbox col-md-6">
                                                                            <label>
                                                                                <input type="checkbox" @(item.Checked ? "checked" : "") name="@item.Id" id="@item.Id" value="@item.Id">@item.Name
                                                                            </label>
                                                                        </div>

                                                                    }
                                                                }
                                                            </div>

                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="over-view">Over View</label>
                                                        <div class="col-sm-10">
                                                            <div id="over-view">@Html.Raw(Model.Overview)</div>
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="search-keys">Keys</label>
                                                        <div class="col-sm-10">
                                                            <textarea style="padding: 15px; border: 1px solid #bdc5c9" class="col-sm-12" rows="4" cols="50" id="search-keys" placeholder="Search key">@Html.Raw(Model.SearchKey)</textarea>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="search-keys">SEO Keyword</label>
                                                        <div class="col-sm-10">
                                                            <textarea style="padding: 15px; border: 1px solid #bdc5c9" class="col-sm-12" rows="4" cols="50" id="SEO_Meta" placeholder="Search key">@Html.Raw(Model.SEO_Meta)</textarea>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="search-keys">SEO Description</label>
                                                        <div class="col-sm-10">
                                                            <textarea style="padding: 15px; border: 1px solid #bdc5c9" class="col-sm-12" rows="4" cols="50" id="SEO_Description" placeholder="Search key">@Html.Raw(Model.SEO_Description)</textarea>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="search-keys">SEO_Title</label>
                                                        <div class="col-sm-10">
                                                            <textarea style="padding: 15px; border: 1px solid #bdc5c9" class="col-sm-12" rows="4" cols="50" id="SEO_Title" placeholder="Search key">@Html.Raw(Model.SEO_Title)</textarea>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                        
                                    </div>
                                </div>
                            </div>


                        </div>

                        <div class="pull-right">
                            <a class="btn btn-success m-b-sm" onclick="updateTourStep1();">Save and continue</a>
                            <a class="btn btn-default m-b-sm" href="@Url.Content("~/Tour")">Cancel</a>
                        </div>
                    </div>
                </div>
                </div>

            </div>
        </div><!-- Row -->
    </div>
    
}
else
{
    <div class="page-title">
        <h3>Basic information</h3>
        <div class="page-breadcrumb">
            <ol class="breadcrumb">
                <li class="active">Add new tour</li>
            </ol>
        </div>
    </div>
    <div id="main-wrapper">
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-white">
       
                    <div class="clearfix"></div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-lg-12 col-md-12">
                                <div class="panel panel-white">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <div class="panel-body">
                                                <form class="form-horizontal">
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="title">Title</label>
                                                        <div class="col-sm-10">
                                                            <input id="title" type="text" class="form-control" placeholder="Title">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="title">Tour title on link</label>
                                                        <div class="col-sm-10">
                                                            <input id="tour_title" type="text" class="form-control" placeholder="Tour Title Link">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="title">Type</label>
                                                        <div class="col-sm-10">
                                                            <select id="type" class="form-control">
                                                                <option value="1">Tour</option>
                                                                <option value="2">Day trip</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="country">Country</label>
                                                        <div class="col-sm-10">
                                                            <select id="country" class="form-control">
                                                                @if (countries.Count > 0)
                                                                {
                                                                    foreach (var country in countries.Where(country => country != null))
                                                                    {
                                                                        <option value="@country.CountryId">@country.Name</option>
                                                                    }
                                                                }
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="city">City</label>
                                                        <div class="col-sm-10">
                                                            <select id="city" multiple="multiple" class="form-control">
                                                                @if (cities.Count > 0)
                                                                {
                                                                    foreach (var city in cities.Where(city => city != null))
                                                                    {
                                                                        <option value="@city.Id" @(city.Checked ? "selected" : "")>@city.Name</option>
                                                                    }
                                                                }
                                                            </select>
                                                        </div>
                                      
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="description">Description</label>
                                                        <div class="col-sm-10">
                                                            <div id="description"></div>
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="location">Location</label>
                                                        <div class="col-sm-10">
                                                            <input id="location" type="text" class="form-control" placeholder="Location">
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="travel-style">Travel style</label>
                                                        <div class="col-sm-10">
                                                            <div id="travel-style">
                                                                @if (items != null)
                                                                {
                                                                    foreach (var item in items)
                                                                    {

                                                                        <div class="checkbox col-md-6">
                                                                            <label>
                                                                                <input type="checkbox" name="@item.Id" id="@item.Id" value="@item.Id">@item.Name
                                                                            </label>
                                                                        </div>

                                                                    }
                                                                }
                                                            </div>

                                                        </div>
                                                    </div>
                                                    
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="over-view">Over View</label>
                                                        <div class="col-sm-10">
                                                            <div id="over-view"></div>
                                                        </div>
                                                    </div>


                                                </form>
                                            </div>
                                        </div>
                                        
                                    </div>
                                </div>
                            </div>


                        </div>

                        <div class="pull-right">
                            <a class="btn btn-success m-b-sm" onclick="saveTourStep1();">Create and continue</a>
                            <a class="btn btn-default m-b-sm" href="@Url.Content("~/Tour")">Cancel</a>
                        </div>
                    </div>
                </div>

            </div>
        </div><!-- Row -->
    </div>
}


@section Scripts {
    @Scripts.Render("~/bundles/tourjs")
}



